<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Graph Script MVP</title>
    <link rel="stylesheet" href="dashboard/style.css" />
  </head>
  <body>
    <div id="app"></div>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ramda/0.25.0/ramda.min.js"></script>
    <script type="module">
      import {
        html,
        h,
        useSignal,
        render,
        useEffect,
        useRef,
        forwardRef,
      } from 'https://npm.reversehttp.com/@preact/signals-core,@preact/signals,htm/preact,preact,preact/hooks,preact/compat'
      import wasmInit from './pkg/sandbox.js'
      import {Dashboard} from './dashboard/index.mjs'

      function App() {
        const count = useSignal(0)
        const constant = useSignal(0)

        useEffect(() => {
          const runWasm = async () => {
            const helloWorld = await wasmInit('./pkg/sandbox_bg.wasm')
            constant.value = helloWorld.add(24, 24)
          }
          runWasm()
        }, [])

        /*
        <button onClick=${() => count.value++}>${count}</button>
        <div>${constant.value + count.value}</div>
        */

        return html`<${Dashboard} />`
      }

      render(h(App), document.getElementById('app'))
    </script>
  </body>
</html>
